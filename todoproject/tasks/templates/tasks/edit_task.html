{% extends 'tasks/base.html' %}

{% block title %}Edit Task - To-Do App{% endblock %}

{% block content %}
<div class="container">
    <div class="form-container">
        <h2>Edit Task</h2>
        <form method="POST" id="editTaskForm">
            {% csrf_token %}

            <div class="form-group">
                <label for="title">Task Title <span class="required">*</span></label>
                <input type="text"
                       id="title"
                       name="title"
                       class="form-control"
                       value="{{ task.title }}"
                       required
                       maxlength="200">
            </div>

            <div class="form-group">
                <label for="description">Description (Optional)</label>
                <textarea id="description"
                          name="description"
                          class="form-control"
                          rows="4">{{ task.description }}</textarea>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="priority">Priority</label>
                    <select id="priority" name="priority" class="form-control">
                        {% for value, label in priority_choices %}
                        <option value="{{ value }}" {% if value == task.priority %}selected{% endif %}>
                            {{ label }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category" class="form-control">
                        {% for value, label in category_choices %}
                        <option value="{{ value }}" {% if value == task.category %}selected{% endif %}>
                            {{ label }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="due_date">Due Date (Optional)</label>
                <input type="datetime-local"
                       id="due_date"
                       name="due_date"
                       class="form-control"
                       value="{% if task.due_date %}{{ task.due_date|date:'Y-m-d\TH:i' }}{% endif %}">
                <small>Set a deadline for this task</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update Task</button>
                <a href="{% url 'dashboard' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}