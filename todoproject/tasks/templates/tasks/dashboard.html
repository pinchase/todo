{% extends 'tasks/base.html' %}

{% block title %}My Tasks - To-Do App{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h1>My Tasks</h1>
        <a href="{% url 'add_task' %}" class="btn btn-primary">+ Add New Task</a>
    </div>

    <div class="tasks-stats">
        <div class="stat-card">
            <h3>{{ tasks.count }}</h3>
            <p>Total Tasks</p>
        </div>
        <div class="stat-card">
            <h3>{{ tasks|length|add:"-1"|add:"1" }}</h3>
            <p>Pending</p>
        </div>
        <div class="stat-card completed">
            <h3 id="completed-count">0</h3>
            <p>Completed</p>
        </div>
    </div>

    <div class="tasks-container">
        {% if tasks %}
            <div class="tasks-list" id="tasksList">
                {% for task in tasks %}
                <div class="task-card {% if task.completed %}completed{% endif %}" data-task-id="{{ task.id }}">
                    <div class="task-content">
                        <div class="task-checkbox">
                            <input type="checkbox"
                                   id="task-{{ task.id }}"
                                   {% if task.completed %}checked{% endif %}
                                   onchange="toggleTask({{ task.id }})">
                        </div>
                        <div class="task-details">
                            <h3 class="task-title">{{ task.title }}</h3>
                            {% if task.description %}
                                <p class="task-description">{{ task.description }}</p>
                            {% endif %}
                            <span class="task-date">Created: {{ task.created_at|date:"M d, Y" }}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        <a href="{% url 'edit_task' task.id %}" class="btn-icon" title="Edit">
                            ✏️
                        </a>
                        <button onclick="deleteTask({{ task.id }})" class="btn-icon" title="Delete">
                            🗑️
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <h2>📭 No tasks yet!</h2>
                <p>Start by adding your first task.</p>
                <a href="{% url 'add_task' %}" class="btn btn-primary">Add Task</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}